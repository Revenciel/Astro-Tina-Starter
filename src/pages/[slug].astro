---
import CustomLayout from '../layouts/CustomLayout.astro';

import { client } from '../../tina/__generated__/client'


export async function getStaticPaths() {

    /* This would need to be updated if there are more types of page collections than just "pages" */
  const pages = await Astro.glob('../content/pages/*.{md,mdx}') 

  return pages.map((page) => ({
		params: {
			slug: page.file.split('/').pop().replace(/\.md(x)?/,'')
		},
		props: { page },
	}));
}

////////

// export const getStaticProps = async () => {
//   const pageResponse = await client.queries.page({ relativePath: '*.mdx' })

//   return {
//     props: {
//       data: pageResponse.data,
//       query: pageResponse.query,
//       variables: pageResponse.variables,
//     },
//   }
// }

///////

const { frontmatter, Content } = Astro.props.page

---
<CustomLayout client:load {frontmatter}><Content /></CustomLayout>